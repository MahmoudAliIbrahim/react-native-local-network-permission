{"version":3,"sources":["index.tsx"],"names":["NativeModules","Platform","LINKING_ERROR","select","ios","default","LocalNetworkPermission","Proxy","get","Error","DEFAULT_TIMEOUT_WAITING_FOR_LOCAL_NETWORK_CHECKING","checkLocalNetworkAccess","timeoutSeconds","OS","check","Promise","resolve","requestLocalNetworkAccess","then","catch","error","console","warn","JSON","stringify"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,QAAxB,QAAwC,cAAxC;AAEA,MAAMC,aAAa,GAChB,gGAAD,GACAD,QAAQ,CAACE,MAAT,CAAgB;AAAEC,EAAAA,GAAG,EAAE,gCAAP;AAAyCC,EAAAA,OAAO,EAAE;AAAlD,CAAhB,CADA,GAEA,sDAFA,GAGA,6CAJF;AAMA,MAAMC,sBAAsB,GAAGN,aAAa,CAACM,sBAAd,GAC3BN,aAAa,CAACM,sBADa,GAE3B,IAAIC,KAAJ,CACE,EADF,EAEE;AACEC,EAAAA,GAAG,GAAG;AACJ,UAAM,IAAIC,KAAJ,CAAUP,aAAV,CAAN;AACD;;AAHH,CAFF,CAFJ;AAWA,MAAMQ,kDAAkD,GAAG,CAA3D;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,uBAAuB,GAClCC,cADqC,IAEhB;AACrB,MAAIX,QAAQ,CAACY,EAAT,KAAgB,KAApB,EAA2B;AACzB,WAAOP,sBAAsB,CAACQ,KAAvB,CACLF,cADK,aACLA,cADK,cACLA,cADK,GACaF,kDADb,CAAP;AAGD;;AACD,SAAOK,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACD,CATM;AAWP;AACA;AACA;;AACA,OAAO,MAAMC,yBAAyB,GAAG,MAAqB;AAC5D,SAAON,uBAAuB,GAC3BO,IADI,CACC,MAAMH,OAAO,CAACC,OAAR,EADP,EAEJG,KAFI,CAEGC,KAAD,IAAkB;AACvBC,IAAAA,OAAO,CAACC,IAAR,CAAc,6BAA4BC,IAAI,CAACC,SAAL,CAAeJ,KAAf,CAAsB,EAAhE;AACD,GAJI,CAAP;AAKD,CANM","sourcesContent":["import { NativeModules, Platform } from 'react-native';\n\nconst LINKING_ERROR =\n  `The package 'react-native-local-network-permission' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\nconst LocalNetworkPermission = NativeModules.LocalNetworkPermission\n  ? NativeModules.LocalNetworkPermission\n  : new Proxy(\n      {},\n      {\n        get() {\n          throw new Error(LINKING_ERROR);\n        },\n      }\n    );\n\nconst DEFAULT_TIMEOUT_WAITING_FOR_LOCAL_NETWORK_CHECKING = 1;\n\n/**\n * following function also will trigger the local network permission dialog if it never show up\n * when the permission wasn't granted, the false result will return soon\n * but when the permission was granted, we only can wait for some seconds and assume it is positive result\n */\nexport const checkLocalNetworkAccess = (\n  timeoutSeconds?: number\n): Promise<boolean> => {\n  if (Platform.OS === 'ios') {\n    return LocalNetworkPermission.check(\n      timeoutSeconds ?? DEFAULT_TIMEOUT_WAITING_FOR_LOCAL_NETWORK_CHECKING\n    );\n  }\n  return Promise.resolve(true);\n};\n\n/**\n * following function also will trigger the local network permission dialog if it never show up\n */\nexport const requestLocalNetworkAccess = (): Promise<void> => {\n  return checkLocalNetworkAccess()\n    .then(() => Promise.resolve())\n    .catch((error: Error) => {\n      console.warn(`requestLocalNetworkAccess ${JSON.stringify(error)}`);\n    });\n};\n"]}